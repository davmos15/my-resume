<h1 class="page-title"><%= section ? 'Edit Resume Section' : 'Add Resume Section' %></h1>

<div class="card">
    <form method="POST" action="<%= section ? `/admin/resume/edit/${section.id}` : '/admin/resume/new' %>">
        <div class="form-group">
            <label for="section_type">Section Type *</label>
            <select class="form-control" id="section_type" name="section_type" required>
                <option value="">Select a type...</option>
                <option value="experience" <%= (section && section.section_type === 'experience') || (typeof preSelectedType !== 'undefined' && preSelectedType === 'experience') ? 'selected' : '' %>>Experience</option>
                <option value="skills" <%= (section && section.section_type === 'skills') || (typeof preSelectedType !== 'undefined' && preSelectedType === 'skills') ? 'selected' : '' %>>Skills & Tools</option>
                <option value="courses" <%= (section && section.section_type === 'courses') || (typeof preSelectedType !== 'undefined' && preSelectedType === 'courses') ? 'selected' : '' %>>Courses & Achievements</option>
                <option value="education" <%= (section && section.section_type === 'education') || (typeof preSelectedType !== 'undefined' && preSelectedType === 'education') ? 'selected' : '' %>>Education</option>
            </select>
        </div>

        <div class="form-group">
            <label for="title">Title *</label>
            <input type="text" class="form-control" id="title" name="title" 
                   value="<%= section ? section.title : '' %>" required>
        </div>

        <div class="form-group">
            <label for="subtitle">Company</label>
            <input type="text" class="form-control" id="subtitle" name="subtitle" 
                   value="<%= section ? section.subtitle : '' %>">
        </div>

        <div class="form-group">
            <label for="date_range">Date Range</label>
            <input type="text" class="form-control" id="date_range" name="date_range" 
                   value="<%= section ? section.date_range : '' %>" 
                   placeholder="e.g. June 2021 - Present">
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea class="form-control editor-textarea" id="description" name="description" 
                      rows="12" placeholder="Enter your description here. Use the toolbar above for formatting."><%= section ? section.description : '' %></textarea>
            <small style="color: #666;">Use the toolbar for formatting or write HTML directly. Toggle between HTML and Preview modes.</small>
        </div>

        <div class="form-group">
            <label for="display_order">Display Order</label>
            <input type="number" class="form-control" id="display_order" name="display_order" 
                   value="<%= section ? section.display_order : 0 %>" min="0">
            <small style="color: #666;">Lower numbers appear first within each section type</small>
        </div>

        <% if (section) { %>
            <div class="form-group">
                <label>
                    <input type="checkbox" name="is_active" value="1" 
                           <%= section.is_active ? 'checked' : '' %>>
                    Active
                </label>
            </div>
        <% } %>

        <div style="margin-top: 30px;">
            <button type="submit" class="btn btn-primary">
                <%= section ? 'Update Section' : 'Create Section' %>
            </button>
            <a href="/admin/resume" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<link rel="stylesheet" href="/css/rich-editor.css">
<script src="/js/rich-editor.js"></script>