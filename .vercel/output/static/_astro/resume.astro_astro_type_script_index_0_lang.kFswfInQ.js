class u{constructor(t){this.modal=t,this.modalContent=t.querySelector(".resume-modal-content"),this.modalClose=t.querySelector(".modal-close"),this.modalIcon=t.querySelector(".modal-icon"),this.modalTitle=t.querySelector(".modal-title"),this.modalBody=t.querySelector(".modal-body"),this.isOpen=!1,this.previousFocus=null,this.scrollPosition=0,this.currentCardId=null,this.cardContents={},this.cacheCardContents(),this.open=this.open.bind(this),this.close=this.close.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.handleOverlayClick=this.handleOverlayClick.bind(this),this.init()}init(){this.modalClose?.addEventListener("click",this.close),this.modal.addEventListener("click",this.handleOverlayClick),this.modalContent?.addEventListener("click",t=>{t.stopPropagation()}),this.modal.setAttribute("role","dialog"),this.modal.setAttribute("aria-modal","true"),this.modalClose?.setAttribute("aria-label","Close modal")}cacheCardContents(){document.querySelectorAll(".dashboard-card").forEach(t=>{const s=t.getAttribute("data-card"),n=t.querySelector(".card-content")?.innerHTML||"",e=t.querySelector(".card-icon")?.textContent||"",o=t.querySelector(".card-title")?.textContent||"";this.cardContents[s]={content:n,icon:e,title:o}})}open(t){if(this.isOpen||!this.cardContents[t])return;this.previousFocus=document.activeElement,this.scrollPosition=window.scrollY,this.currentCardId=t;const s=this.cardContents[t];this.modalIcon&&(this.modalIcon.textContent=s.icon),this.modalTitle&&(this.modalTitle.textContent=s.title),this.modalBody&&(this.modalBody.innerHTML=s.content),this.modalTitle&&(this.modalTitle.id="modal-title",this.modal.setAttribute("aria-labelledby","modal-title")),this.isOpen=!0,this.modal.classList.add("show"),document.body.style.overflow="hidden",document.addEventListener("keydown",this.handleKeydown),this.initContentInteractions(),setTimeout(()=>{this.modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},50),this.modal.dispatchEvent(new CustomEvent("resume-modal-opened",{detail:{cardId:t}}))}close(){this.isOpen&&(this.isOpen=!1,this.modal.classList.remove("show"),document.body.style.overflow="",document.removeEventListener("keydown",this.handleKeydown),this.previousFocus&&this.previousFocus.focus(),this.modal.dispatchEvent(new CustomEvent("resume-modal-closed",{detail:{cardId:this.currentCardId}})),this.currentCardId=null)}handleKeydown(t){if(t.key==="Escape"&&this.close(),t.key==="Tab"){const s=this.modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(s.length===0)return;const n=s[0],e=s[s.length-1];t.shiftKey&&document.activeElement===n?(t.preventDefault(),e.focus()):!t.shiftKey&&document.activeElement===e&&(t.preventDefault(),n.focus())}}handleOverlayClick(t){t.target===this.modal&&this.close()}initContentInteractions(){this.modalBody?.addEventListener("click",t=>{const s=t.target.closest(".job-header");if(s){const n=s.getAttribute("data-job"),e=this.modalBody.querySelector(`#job-${n}`),o=s.querySelector(".job-toggle");e&&o&&(e.classList.contains("expanded")?(e.classList.remove("expanded"),o.textContent="+",o.setAttribute("aria-expanded","false")):(e.classList.add("expanded"),o.textContent="−",o.setAttribute("aria-expanded","true")))}if(t.target.classList.contains("skill-toggle")){const n=t.target.getAttribute("data-skill"),e=this.modalBody.querySelector(`#skill-${n}`);e&&(e.classList.contains("expanded")?(e.classList.remove("expanded"),t.target.textContent="+",t.target.setAttribute("aria-expanded","false")):(e.classList.add("expanded"),t.target.textContent="−",t.target.setAttribute("aria-expanded","true")))}})}}function h(){const r=document.getElementById("resume-modal");if(!r){console.error("Resume modal element not found");return}const t=new u(r);document.querySelectorAll(".dashboard-card").forEach(e=>{const o=e.querySelector(".clickable-header");o&&(o.addEventListener("click",function(i){i.preventDefault();const a=e.getAttribute("data-card");t.open(a)}),o.setAttribute("tabindex","0"),o.setAttribute("role","button"),o.setAttribute("aria-label",`Open ${e.querySelector(".card-title")?.textContent||"section"} details`),o.addEventListener("keydown",function(i){if(i.key==="Enter"||i.key===" "){i.preventDefault();const a=e.getAttribute("data-card");t.open(a)}}))});function s(e,o,i,a){if(!e)return;const d=(i-o)/(a/30);let l=o;const c=setInterval(function(){l+=d,l>=i&&(l=i,clearInterval(c)),e.textContent=Math.floor(l)},30)}const n=document.querySelector(".summary-stats");if(n){const e=parseInt(n.getAttribute("data-years"))||0,o=parseInt(n.getAttribute("data-companies"))||0,i=parseInt(n.getAttribute("data-roles"))||0;s(document.getElementById("years-exp"),0,e,1e3),s(document.getElementById("companies-count"),0,o,1e3),s(document.getElementById("roles-count"),0,i,1e3)}console.log("Resume page initialized with modal manager")}h();
